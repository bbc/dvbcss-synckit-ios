<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DIALDeviceDiscovery  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>


    <a title="DIALDeviceDiscovery  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          DIALDeviceDiscovery Docs
        </a>
         (50% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/bbc/dvbcss-synckit-ios/tree/master/src/DIALDeviceDiscovery">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">DIALDeviceDiscovery Reference</a>
      <img class="carat" src="img/carat.png" />
      DIALDeviceDiscovery  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DIALDevice.html">DIALDevice</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DIALDeviceDiscoveryTask.html">DIALDeviceDiscoveryTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DIALServiceDiscovery.html">DIALServiceDiscovery</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DeviceDescription.html">DeviceDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SSDPService.html">SSDPService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SSDPServiceDiscovery.html">SSDPServiceDiscovery</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@DIALDeviceDiscoveryVersionNumber">DIALDeviceDiscoveryVersionNumber</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@DIALDeviceDiscoveryVersionString">DIALDeviceDiscoveryVersionString</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_All">SSDPServiceType_All</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_DIAL_MultiScreenOrgService1">SSDPServiceType_DIAL_MultiScreenOrgService1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_Microsoft_MediaReceiverRegistrar1">SSDPServiceType_Microsoft_MediaReceiverRegistrar1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_AVTransport1">SSDPServiceType_UPnP_AVTransport1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_ConnectionManager1">SSDPServiceType_UPnP_ConnectionManager1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_ContentDirectory1">SSDPServiceType_UPnP_ContentDirectory1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_InternetGatewayDevice1">SSDPServiceType_UPnP_InternetGatewayDevice1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_Layer3Forwarding1">SSDPServiceType_UPnP_Layer3Forwarding1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_MediaRenderer1">SSDPServiceType_UPnP_MediaRenderer1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_MediaServer1">SSDPServiceType_UPnP_MediaServer1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_RenderingControl1">SSDPServiceType_UPnP_RenderingControl1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_RootDevice">SSDPServiceType_UPnP_RootDevice</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_SonosZonePlayer1">SSDPServiceType_UPnP_SonosZonePlayer1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_WANCommonInterfaceConfig1">SSDPServiceType_UPnP_WANCommonInterfaceConfig1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_WANConnectionDevice1">SSDPServiceType_UPnP_WANConnectionDevice1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_WANDevice1">SSDPServiceType_UPnP_WANDevice1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SSDPServiceType_UPnP_WANIPConnection1">SSDPServiceType_UPnP_WANIPConnection1</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDeviceExpiryNotification">kDIALDeviceExpiryNotification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_AllowStopKey">kDIALDevice_AllowStopKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_DIALServerKey">kDIALDevice_DIALServerKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_DIALServiceKey">kDIALDevice_DIALServiceKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_DIALVersionKey">kDIALDevice_DIALVersionKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_DeviceNameKey">kDIALDevice_DeviceNameKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_HbbTVApp2AppURLKey">kDIALDevice_HbbTVApp2AppURLKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_HbbTVInterDevSyncURKey">kDIALDevice_HbbTVInterDevSyncURKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_HbbTV_UserAgentKey">kDIALDevice_HbbTV_UserAgentKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_HostKey">kDIALDevice_HostKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDIALDevice_StateKey">kDIALDevice_StateKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_DeviceType">kDeviceDesc_DeviceType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_FriendlyName">kDeviceDesc_FriendlyName</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_Manufacturer">kDeviceDesc_Manufacturer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_ManufacturerURL">kDeviceDesc_ManufacturerURL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_ModelDescription">kDeviceDesc_ModelDescription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_ModelName">kDeviceDesc_ModelName</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_ModelNumber">kDeviceDesc_ModelNumber</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_ModelURL">kDeviceDesc_ModelURL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_PresentationURL">kDeviceDesc_PresentationURL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_SerialNumber">kDeviceDesc_SerialNumber</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kDeviceDesc_UDN">kDeviceDesc_UDN</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kHbbTVApp">kHbbTVApp</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kNewDIALDeviceDiscoveryNotification">kNewDIALDeviceDiscoveryNotification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@kRefreshDiscoveredDevicesNotification">kRefreshDiscoveredDevicesNotification</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/DIALDeviceDiscoveryTaskStatus.html">DIALDeviceDiscoveryTaskStatus</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/DIALDeviceDiscoveryTaskDelegate.html">DIALDeviceDiscoveryTaskDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SSDPServiceDiscoveryDelegate.html">SSDPServiceDiscoveryDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#dialdevicediscovery-ios-framework-library' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='dialdevicediscovery-ios-framework-library'>DIALDeviceDiscovery iOS Framework Library</h1>

<ul>
<li><strong><a href="#how-to-use">How to use</a></strong></li>
<li><strong><a href="#read-the-documentation">Read the documentation</a></strong></li>
<li><strong><a href="#run-the-example-app">Run the example app</a></strong></li>
</ul>

<p>The <strong>DIALDeviceDiscovery</strong> iOS framework library provides APIs for the discovery of services via SSDP and the discovery of devices via DIAL. It allows HbbTV terminals existing on the same network to be discovered by the Companion Screen Application.
Using the DIAL protocol, the Companion Screen Application can launch an HbbTV application on the television.</p>
<a href='#dependencies' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='dependencies'>Dependencies</h3>

<p>The DIALDeviceDiscovery library requires the following dynamic libraries (found in SyncKit):
1. SyncKitConfiguration
2. SyncKitCollections
3. SimpleLogger
4. AsyncSocket</p>
<a href='#service-discovery-via-ssdp' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='service-discovery-via-ssdp'>Service Discovery via SSDP</h3>

<p>The <strong>SSDPServiceDiscovery</strong> class implements the service discovery API of the library. The API aims at discovering UPnP devices supporting a particular service type in the local network. This class listens for service advertisements on the UPnP multicast address/port and, maintains soft-state. Changes in services table membership are notified to a delegate via the SSDPServiceDiscoveryDelegate protocol.</p>
<a href='#device-discovery-via-dial' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='device-discovery-via-dial'>Device Discovery via DIAL</h3>

<p>The <strong>DIALDeviceDiscovery</strong> class implements the API to discover and manage devices on the network running a DIAL server and applications e.g. an HbbTV application.
In the first step of the discovery process, it uses the SSDPServiceDiscovery module to discover services of type <em>DIAL_MultiScreenOrgService1</em>. Subsequently, <strong>DIALAppDiscoveryTasks</strong> are created and launched to take over the remainder of the device discovery: 1) the Device Description request and 2) the Application Information request.</p>

<p>The discovery of new devices on the network or expiry of currently-known devices by the library is notified to observers via the DIALDeviceDiscoveryDelegate protocol and via event notifications.</p>
<a href='#read-the-documentation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='read-the-documentation'>Read the documentation</h2>

<p>The docs for the library can be read <a href="index.html">here</a>.</p>
<a href='#how-to-use' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='how-to-use'>How to use</h2>

<p>A Cocoa Pod version of this library is not currently available. To use this library.</p>
<a href='#add-the-framework-and-its-dependencies-to-your-project' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='add-the-framework-and-its-dependencies-to-your-project'>Add the framework and its dependencies to your project</h4>

<ol>
<li><em>Add the required projects to your workspace</em></li>
</ol>

<p>The easiest way to use the DIALDeviceDiscovery framework is to include these Xcode projects to your XCode workspace.
* DIALDeviceDiscovery
* SyncKitConfiguration
* SyncKitCollections
* SimpleLogger
* AsyncSocket</p>

<p>Then, after building these projects, go to your project&rsquo;s target window and <em>click on project in Project Navigator, then the project&rsquo;s target on right window in General tab</em>), add these frameworks in the <em>Linked Frameworks and libraries</em> section: <em>DIALDeviceDiscovery.framework, SyncKitConfiguration.framework, SyncKitCollections.framework, SimpleLogger.framework, AsyncSocket.framework</em>.</p>

<ol>
<li><em>Add the dynamic libraries to your project</em></li>
</ol>

<p>Or alternatively, clone the SyncKit repository, open the main workspace and build all the projects.</p>

<p>Then, in your project&rsquo;s target window (<em>click on project in Project Navigator, then the project&rsquo;s target on right window in General tab</em>), add the framework files in the <em>Linked Frameworks and libraries</em> section: <em>DIALDeviceDiscovery.framework, SyncKitConfiguration.framework, SyncKitCollections.framework, SimpleLogger.framework, AsyncSocket.framework</em>.
If you have two XCode instances running you can drag and drop the framework files from their respective project in SyncKit to your own project.</p>

<ol>
<li><em>Use the Cocoa Pod version</em>
Not available yet.</li>
</ol>
<a href='#import-the-header-files' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='import-the-header-files'>Import the header files</h4>

<p>Once the library and its dependencies have been added to your project, import this header file in your source file:</p>
<pre class="highlight plaintext"><code>#import &lt;DIALDeviceDiscovery/DIALDeviceDiscovery.h&gt;

</code></pre>
<a href='#launch-the-dial-discovery-and-register-for-notifications' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='launch-the-dial-discovery-and-register-for-notifications'>Launch the DIAL discovery and register for notifications</h4>

<p>Create a DIALDeviceDiscovery instance to look for a particular application:</p>
<pre class="highlight plaintext"><code>config = [SyncKitGlobals getInstance];
assert(config!=nil);

LogInfo(@"AppDelegate: Loading DIAL device discovery components .... ");

self.tvDiscoveryComponent = [[DIALServiceDiscovery alloc] initWithApplication:@"HbbTV"];
[self.tvDiscoveryComponent start];
</code></pre>

<p>Register for notifications:</p>
<pre class="highlight plaintext"><code>// register for notifications
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(DIALServiceDiscoveryNotificationReceived:) name:nil object:self.tvDiscoveryComponent];

</code></pre>
<a href='#get-all-currently-discovered-devices' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='get-all-currently-discovered-devices'>Get all currently discovered devices</h4>

<p>Call the getDiscoveredDIALDevices() method to get a list of all currently available devices. Each device is represented by a <a href="">DIALDevice</a> object</p>
<pre class="highlight plaintext"><code>NSArray*  deviceList =  [_tvDiscoveryComponent getDiscoveredDIALDevices];;

</code></pre>
<a href='#wait-for-and-handle-notifications-about-new-devices-discovered-and-other-devices-leaving' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='wait-for-and-handle-notifications-about-new-devices-discovered-and-other-devices-leaving'>Wait for and handle notifications about new devices discovered and other devices leaving</h4>

<p>Handle kNewDIALDeviceDiscoveryNotification  and kDIALDeviceExpiryNotification notifications.
Here&rsquo;s an example of an event handler:</p>
<pre class="highlight plaintext"><code>/** Handler for DIAL service discovery and update notifications */
- (void) DIALServiceDiscoveryNotificationReceived:(NSNotification*) aNotification
{
    DIALDevice *device;

    if ([[aNotification name] caseInsensitiveCompare:kNewDIALDeviceDiscoveryNotification] == 0) {
    id temp = [[aNotification userInfo] objectForKey:kNewDIALDeviceDiscoveryNotification];

    if ([temp isKindOfClass: [DIALDevice class]] )
    {
      device = (DIALDevice*) temp;

      MWLogDebug(@"App Delegate: Master Device %@ found on network.", device.friendlyName);

      // do something ...
    }


    } else if ([[aNotification name] caseInsensitiveCompare:kDIALDeviceExpiryNotification] == 0)
    {
      device = (DIALDevice*) [[aNotification userInfo] objectForKey:kDIALDeviceExpiryNotification];

      LogInfo(@"App Delegate: Master Device %@ no longer available.", device.friendlyName);

      // do something e.g. tell observers to refresh their device list

      [[NSNotificationCenter defaultCenter] postNotificationName:kRefreshDiscoveredDevicesNotification object:nil];

    // ...

    }
}

</code></pre>
<a href='#run-the-example-app' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='run-the-example-app'>Run the example app</h2>

<p>A demo app called <a href="DIALDiscoveryDemo/">DIALDiscoveryDemo</a> is included with the  library. To run the demo,open the DIALDiscoveryDemo workspace (DIALDiscoveryDemo.xcworkspace) in XCode and deploy on your iOS device.
Make sure your TV and your iOS device are both on the same network.</p>

<p>If you want to run your own DIAL server, there are other projects that implement this, such as node_hbbtv by Fraunhofer. The latest build 0.0.10 or later is required. Install it on a computer (on the same network) from npm or obtain it directly from github:
<a href="https://github.com/fraunhoferfokus/node-hbbtv/">https://github.com/fraunhoferfokus/node-hbbtv/</a></p>
<a href='#licence' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='licence'>Licence</h2>

<p>The DIALDiscoveryDemo Framework is developed by BBC R&amp;D and distributed under Licensed under the Apache License, <a href="http://www.apache.org/licenses/LICENSE-2.0">Version 2.0</a>.</p>

<p>© Copyright 2016 BBC R&amp;D. All Rights Reserved</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2016 <a class="link" href="http://bbc.co.uk/rd" target="_blank" rel="external">Rajiv_Ramdhany</a>. All rights reserved. (Last updated: 2016-09-18)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
